
<div class="page-header">
  <h1 class="page-header">Sistema de cadastro de metas &nbsp;</h1>
  <% mes = l @mes_referencia, :format => '%B' %>
  <div class="actions pull-right">
    <h2 class="lvh-label">
      <div class="btn-group">
        <%= link_to "<i class='fa fa-angle-left'></i>".html_safe,  {:periodo => @mes_referencia - 1.month}, :class => 'btn btn-default' %>
        <%= link_to mes, '', :class => 'btn btn-default' %>
        <%= link_to "<i class='fa fa-angle-right'></i>".html_safe, {:periodo => @mes_referencia + 1.month}, :class => 'btn btn-default' %>
      </div>
    </h2>
  </div>
</div>
<div class="row">
  <div class="col-lg-3 col-md-6">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <div class="row">
          <div class="col-xs-3">
            <i class="fa fa-tasks fa-5x"></i>
          </div>
          <div class="col-xs-9 text-right">
            <div class="huge"><%= @metas %></div>
            <div>Total de metas </div>
          </div>
        </div>
      </div>
      <%= link_to metas_path do %>
      <div class="panel-footer">
        <span class="pull-left">Ver metas</span>
        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
        <div class="clearfix"></div>
      </div>
      <% end %>
    </div>
  </div>
  <div class="col-lg-3 col-md-6">
    <div class="panel panel-green">
      <div class="panel-heading">
        <div class="row">
          <div class="col-xs-3">
            <i class="fa fa-check-square-o fa-5x"></i>
          </div>
          <div class="col-xs-9 text-right">
            <div class="huge"><%= Meta.metas_done(@mes_referencia) %></div>
            <div>Metas concluídas</div>
          </div>
        </div>
      </div>
      <%= link_to metas_path do %>
      <div class="panel-footer">
        <span class="pull-left">Ver metas</span>
        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
        <div class="clearfix"></div>
      </div>
      <% end %>
    </div>
  </div>

  <div class="col-lg-3 col-md-6">
    <div class="panel panel-yellow">
      <div class="panel-heading">
        <div class="row">
          <div class="col-xs-3">
            <i class="fa fa-pencil-square-o fa-5x"></i>
          </div>
          <div class="col-xs-9 text-right">
            <div class="huge"><%= Meta.metas_not_done(@mes_referencia).count %></div>
            <div>Metas não concluídas</div>
          </div>
        </div>
      </div>
      <%= link_to metas_path do %>
      <div class="panel-footer">
        <span class="pull-left">Ver metas</span>
        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
        <div class="clearfix"></div>
      </div>
      <% end %>
    </div>
  </div>

</div>

<div class="row">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h2>Dificuldade <small>Metas por dificuldade</small></h2>
      </div>
      <%= pie_chart @todas_metas.group("dificuldades.nome").count, legend: "bottom" %>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h2>Tipo <small>Metas por tipo</small></h2>
      </div>
      <%= pie_chart @todas_metas.group("tipos.nome").count %>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h2>Ganho <small>Metas por ganho</small></h2>
      </div>
      <%= pie_chart @todas_metas.group("ganhos.nome").count, legend: "bottom" %>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h2>Responsável <small>Metas por usuários</small></h2>
        <%= pie_chart @todas_metas.group("usuarios.nome").count, legend: "bottom" %>
      </div>
    </div>
  </div>
</div>
